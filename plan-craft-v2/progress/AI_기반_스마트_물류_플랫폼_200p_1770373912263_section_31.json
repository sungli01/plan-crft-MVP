{
  "section": {
    "id": 31,
    "title": "11-1. 데이터베이스 상세 설계",
    "targetWords": 1500,
    "parentTitle": "11. 상세 설계",
    "prompt": "ERD, 테이블 구조, 관계 설계. 최소 1500단어."
  },
  "content": "## 11-1. 데이터베이스 상세 설계\n\n### 1. ERD (Entity Relationship Diagram)\n\n다음은 AI 기반 스마트 물류 플랫폼의 데이터베이스 ERD입니다:\n\n![ERD](erd.png)\n\n이 ERD에는 다음과 같은 엔티티가 포함되어 있습니다:\n\n1. **User**: 플랫폼 사용자 정보를 저장합니다.\n2. **Shipper**: 화주 정보를 저장합니다.\n3. **Carrier**: 운송사 정보를 저장합니다.\n4. **Shipment**: 배송 정보를 저장합니다.\n5. **Package**: 배송 상품 정보를 저장합니다.\n6. **Vehicle**: 운송 차량 정보를 저장합니다.\n7. **Route**: 배송 경로 정보를 저장합니다.\n8. **Sensor**: 센서 데이터 정보를 저장합니다.\n9. **Prediction**: 수요 예측 정보를 저장합니다.\n10. **Transaction**: 거래 내역 정보를 저장합니다.\n11. **Wallet**: 사용자 지갑 정보를 저장합니다.\n\n### 2. 테이블 구조\n\n다음은 각 엔티티의 테이블 구조입니다:\n\n#### 2-1. User 테이블\n\n| 필드명 | 데이터 타입 | 설명 |\n| --- | --- | --- |\n| user_id | INT, PRIMARY KEY, AUTO_INCREMENT | 사용자 고유 식별자 |\n| username | VARCHAR(50), NOT NULL | 사용자 이름 |\n| email | VARCHAR(100), NOT NULL, UNIQUE | 사용자 이메일 |\n| password | VARCHAR(100), NOT NULL | 사용자 비밀번호 |\n| phone | VARCHAR(20) | 사용자 전화번호 |\n| address | VARCHAR(200) | 사용자 주소 |\n| role | ENUM('shipper', 'carrier'), NOT NULL | 사용자 역할 |\n| created_at | TIMESTAMP, DEFAULT CURRENT_TIMESTAMP | 계정 생성 시간 |\n| updated_at | TIMESTAMP, DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP | 계정 정보 수정 시간 |\n\n#### 2-2. Shipper 테이블\n\n| 필드명 | 데이터 타입 | 설명 |\n| --- | --- | --- |\n| shipper_id | INT, PRIMARY KEY, AUTO_INCREMENT | 화주 고유 식별자 |\n| user_id | INT, NOT NULL, FOREIGN KEY (user_id) REFERENCES User(user_id) | 사용자 고유 식별자 |\n| company_name | VARCHAR(100), NOT NULL | 화주 회사명 |\n| company_address | VARCHAR(200), NOT NULL | 화주 회사 주소 |\n| company_phone | VARCHAR(20), NOT NULL | 화주 회사 전화번호 |\n| company_email | VARCHAR(100), NOT NULL | 화주 회사 이메일 |\n| tax_id | VARCHAR(20), NOT NULL | 화주 사업자 등록번호 |\n| created_at | TIMESTAMP, DEFAULT CURRENT_TIMESTAMP | 화주 등록 시간 |\n| updated_at | TIMESTAMP, DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP | 화주 정보 수정 시간 |\n\n#### 2-3. Carrier 테이블\n\n| 필드명 | 데이터 타입 | 설명 |\n| --- | --- | --- |\n| carrier_id | INT, PRIMARY KEY, AUTO_INCREMENT | 운송사 고유 식별자 |\n| user_id | INT, NOT NULL, FOREIGN KEY (user_id) REFERENCES User(user_id) | 사용자 고유 식별자 |\n| company_name | VARCHAR(100), NOT NULL | 운송사 회사명 |\n| company_address | VARCHAR(200), NOT NULL | 운송사 회사 주소 |\n| company_phone | VARCHAR(20), NOT NULL | 운송사 회사 전화번호 |\n| company_email | VARCHAR(100), NOT NULL | 운송사 회사 이메일 |\n| tax_id | VARCHAR(20), NOT NULL | 운송사 사업자 등록번호 |\n| created_at | TIMESTAMP, DEFAULT CURRENT_TIMESTAMP | 운송사 등록 시간 |\n| updated_at | TIMESTAMP, DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP | 운송사 정보 수정 시간 |\n\n#### 2-4. Shipment 테이블\n\n| 필드명 | 데이터 타입 | 설명 |\n| --- | --- | --- |\n| shipment_id | INT, PRIMARY KEY, AUTO_INCREMENT | 배송 주문 고유 식별자 |\n| shipper_id | INT, NOT NULL, FOREIGN KEY (shipper_id) REFERENCES Shipper(shipper_id) | 화주 고유 식별자 |\n| carrier_id | INT, NOT NULL, FOREIGN KEY (carrier_id) REFERENCES Carrier(carrier_id) | 운송사 고유 식별자 |\n| package_id | INT, NOT NULL, FOREIGN KEY (package_id) REFERENCES Package(package_id) | 배송 상품 고유 식별자 |\n| route_id | INT, NOT NULL, FOREIGN KEY (route_id) REFERENCES Route(route_id) | 배송 경로 고유 식별자 |\n| vehicle_id | INT, NOT NULL, FOREIGN KEY (vehicle_id) REFERENCES Vehicle(vehicle_id) | 운송 차량 고유 식별자 |\n| status | ENUM('pending', 'in_transit', 'delivered', 'cancelled'), NOT NULL | 배송 상태 |\n| pickup_date | DATETIME, NOT NULL | 픽업 예정 날짜 |\n| delivery_date | DATETIME, NOT NULL | 배송 예정 날짜 |\n| created_at | TIMESTAMP, DEFAULT CURRENT_TIMESTAMP | 배송 주문 생성 시간 |\n| updated_at | TIMESTAMP, DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP | 배송 정보 수정 시간 |\n\n#### 2-5. Package 테이블\n\n| 필드명 | 데이터 타입 | 설명 |\n| --- | --- | --- |\n| package_id | INT, PRIMARY KEY, AUTO_INCREMENT | 배송 상품 고유 식별자 |\n| shipment_id | INT, NOT NULL, FOREIGN KEY (shipment_id) REFERENCES Shipment(shipment_id) | 배송 주문 고유 식별자 |\n| item_name | VARCHAR(100), NOT NULL | 상품명 |\n| item_description | TEXT | 상품 설명 |\n| item_weight | DECIMAL(10,2), NOT NULL | 상품 중량 |\n| item_volume | DECIMAL(10,2), NOT NULL | 상품 부피 |\n| item_value | DECIMAL(10,2), NOT NULL | 상품 가치 |\n| created_at | TIMESTAMP, DEFAULT CURRENT_TIMESTAMP | 상품 등록 시간 |\n| updated_at | TIMESTAMP, DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP | 상품 정보 수정 시간 |\n\n#### 2-6. Vehicle 테이블\n\n| 필드명 | 데이터 타입 | 설명 |\n| --- | --- | --- |\n| vehicle_id | INT, PRIMARY KEY, AUTO_INCREMENT | 운송 차량 고유 식별자 |\n| carrier_id | INT, NOT NULL, FOREIGN KEY (carrier_id) REFERENCES Carrier(carrier_id) | 운송사 고유 식별자 |\n| plate_number | VARCHAR(20), NOT NULL, UNIQUE | 차량 번호판 |\n| vehicle_type | ENUM('truck', 'van', 'container'), NOT NULL | 차량 유형 |\n| capacity_weight | DECIMAL(10,2), NOT NULL | 차량 적재 중량 |\n| capacity_volume | DECIMAL(10,2), NOT NULL | 차량 적재 부피 |\n| is_available | BOOLEAN, DEFAULT TRUE | 차량 가용성 |\n| created_at | TIMESTAMP, DEFAULT CURRENT_TIMESTAMP | 차량 등록 시간 |\n| updated_at | TIMESTAMP, DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP | 차량 정보 수정 시간 |\n\n#### 2-7. Route 테이블\n\n| 필드명 | 데이터 타입 | 설명 |\n| --- | --- | --- |\n| route_id | INT, PRIMARY KEY, AUTO_INCREMENT | 배송 경로 고유 식별자 |\n| shipment_id | INT, NOT NULL, FOREIGN KEY (shipment_id) REFERENCES Shipment(shipment_id) | 배송 주문 고유 식별자 |\n| pickup_location | VARCHAR(200), NOT NULL | 픽업 장소 |\n| delivery_location | VARCHAR(200), NOT NULL | 배송 장소 |\n| distance | DECIMAL(10,2), NOT NULL | 거리 |\n| estimated_travel_time | INT, NOT NULL | 예상 이동 시간 (분) |\n| created_at | TIMESTAMP, DEFAULT CURRENT_TIMESTAMP | 경로 등록 시간 |\n| updated_at | TIMESTAMP, DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP | 경로 정보 수정 시간 |\n\n#### 2-8. Sensor 테이블\n\n| 필드명 | 데이터 타입 | 설명 |\n| --- | --- | --- |\n| sensor_id | INT, PRIMARY KEY, AUTO_INCREMENT | 센서 고유 식별자 |\n| vehicle_id | INT, NOT NULL, FOREIGN KEY (vehicle_id) REFERENCES Vehicle(vehicle_id) | 운송 차량 고유 식별자 |\n| sensor_type | ENUM('temperature', 'humidity', 'gps', 'accelerometer'), NOT NULL | 센서 유형 |\n| sensor_value | DECIMAL(10,2), NOT NULL | 센서 값 |\n| sensor_timestamp | TIMESTAMP, NOT NULL | 센서 데이터 수집 시간 |\n| created_at | TIMESTAMP, DEFAULT CURRENT_TIMESTAMP | 센서 등록 시간 |\n| updated_at | TIMESTAMP, DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP | 센서 정보 수정 시간 |\n\n#### 2-9. Prediction 테이블\n\n| 필드명 | 데이터 타입 | 설명 |\n| --- | --- | --- |\n| prediction_id | INT, PRIMARY KEY, AUTO_INCREMENT | 수요 예측 고유 식별자 |\n| shipper_id | INT, NOT NULL, FOREIGN KEY (shipper_id) REFERENCES Shipper(shipper_id) | 화주 고유 식별자 |\n| package_id | INT, NOT NULL, FOREIGN KEY (package_id) REFERENCES Package(package_id) | 배송 상품 고유 식별자 |\n| predicted_demand | INT, NOT NULL | 예측 수요량 |\n| prediction_date | DATE, NOT NULL | 예측 날짜 |\n| created_at | TIMESTAMP, DEFAULT CURRENT_TIMESTAMP | 예측 정보 생성 시간 |\n| updated_at | TIMESTAMP, DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP | 예측 정보 수정 시간 |\n\n#### 2-10. Transaction 테이블\n\n| 필드명 | 데이터 타입 | 설명 |\n| --- | --- | --- |\n| transaction_id | INT, PRIMARY KEY, AUTO_INCREMENT | 거래 내역 고유 식별자 |\n| shipment_id | INT, NOT NULL, FOREIGN KEY (shipment_id) REFERENCES Shipment(shipment_id) | 배송 주문 고유 식별자 |\n| wallet_id | INT, NOT NULL, FOREIGN KEY (wallet_id) REFERENCES Wallet(wallet_id) | 지갑 고유 식별자 |\n| amount | DECIMAL(10,2), NOT NULL | 거래 금액 |\n| transaction_type | ENUM('payment', 'refund'), NOT NULL | 거래 유형 |\n| transaction_status | ENUM('pending', 'completed', 'failed'), NOT NULL | 거래 상태 |\n| created_at | TIMESTAMP, DEFAULT CURRENT_TIMESTAMP | 거래 내역 생성 시간 |\n| updated_at | TIMESTAMP, DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP | 거래 내역 수정 시간 |\n\n#### 2-11. Wallet 테이블\n\n| 필드명 | 데이터 타입 | 설명 |\n| --- | --- | --- |\n| wallet_id | INT, PRIMARY KEY, AUTO_INCREMENT | 지갑 고유 식별자 |\n| user_id | INT, NOT NULL, FOREIGN KEY (user_id) REFERENCES User(user_id) | 사용자 고유 식별자 |\n| wallet_address | VARCHAR(100), NOT NULL, UNIQUE | 지갑 주소 |\n| balance | DECIMAL(10,2), NOT NULL, DEFAULT 0 | 지갑 잔액 |\n| created_at | TIMESTAMP, DEFAULT CURRENT_TIMESTAMP | 지갑 생성 시간 |\n| updated_at | TIMESTAMP, DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP | 지갑 정보 수정 시간 |\n\n### 3. 관계 설계\n\n이 데이터베이스 설계에는 다음과 같은 관계가 포함됩니다:\n\n1. **One-to-One 관계**:\n   - User와 Shipper, User와 Carrier 간 1:1 관계\n   - User와 Wallet 간 1:1 관계\n\n2. **One-to-Many 관계**:\n   - Shipper와 Shipment 간 1:N 관계\n   - Carrier와 Shipment, Carrier와 Vehicle 간 1:N 관계\n   - Shipment와 Package, Shipment와 Route, Shipment와 Transaction 간 1:N 관계\n   - Vehicle와 Sensor 간 1:N 관계\n   - Shipper와 Prediction 간 1:N 관계\n\n3. **Many-to-Many 관계**:\n   - Shipment와 Carrier 간 N:M 관계 (화주와 운송사 간 배송 주문 관계)\n\n이러한 관계를 통해 사용자, 화주, 운송사, 배송 주문, 상품, 차량, 센서 데이터, 수요 예측, 거래 내역 등의 정보를 체계적으로 관리할 수 있습니다. 또한 이 관계를 활용하여 다양한 쿼리와 분석을 수행할 수 있습니다.",
  "wordCount": 1568,
  "tokens": {
    "input_tokens": 300,
    "cache_creation_input_tokens": 0,
    "cache_read_input_tokens": 0,
    "cache_creation": {
      "ephemeral_5m_input_tokens": 0,
      "ephemeral_1h_input_tokens": 0
    },
    "output_tokens": 4072,
    "service_tier": "standard",
    "inference_geo": "not_available"
  },
  "generatedAt": "2026-02-06T10:43:38.775Z"
}